{"ast":null,"code":"export default {\n  name: \"order\",\n  data() {\n    return {\n      \"type\": \"\",\n      \"hascurrent\": false,\n      \"history\": [],\n      \"currentorder\": {}\n    };\n  },\n  methods: {\n    gettype() {\n      this.type = this.$route.query.type;\n      console.log(this.type);\n    },\n    getcurrent() {\n      var token = localStorage.getItem(\"token\");\n      var send_data = {\n        \"token\": token\n      };\n      this.axios({\n        method: \"GET\",\n        url: `https://mock.apifox.cn/m1/2726825-0-default/client/index/order`,\n        data: JSON.stringify(send_data)\n      }).then(response => {\n        console.log(response);\n        if (true) {\n          // console.log(\"请求的返回值\")\n          // console.log(response.data.data.order_array)\n          this.currentorder = response.data.data.order_array.filter(function (data) {\n            return data.state != \"FINISHED\";\n          });\n          if (this.currentorder == null) {\n            this.hascurrent = false;\n          } else {\n            this.hascurrent = true;\n          }\n        } else {\n          alert(\"response.msg\");\n        }\n      }).catch(error => {\n        alert(\"getcurrent出错了\");\n      });\n    },\n    gethistory() {\n      var token = localStorage.getItem(\"token\");\n      var send_data = {\n        \"token\": token\n      };\n      this.axios({\n        method: \"GET\",\n        url: `https://mock.apifox.cn/m1/2726825-0-default/client/index/order`,\n        data: JSON.stringify(send_data)\n      }).then(response => {\n        console.log(response);\n        if (true) {\n          // console.log(\"请求的返回值\")\n          // console.log(response.data.data.order_array)\n          this.history = response.data.data.order_array.filter(function (data) {\n            return data.state == \"FINISHED\";\n          });\n        } else {\n          alert(\"response.msg\");\n        }\n      }).catch(error => {\n        alert(\"gethistory出错了\");\n      });\n    }\n  },\n  watch: {\n    $route() {\n      console.log(\"watch\");\n      this.gettype();\n      // 查看当前是否有正在执行的订单\n      if (this.type == \"charge\") {\n        this.getcurrent();\n        if (this.currentorder == null) {\n          this.hascurrent = false;\n        } else {\n          this.hascurrent = true;\n        }\n      } else if (this.type == \"current\") {\n        this.getcurrent();\n        if (this.getcurrent == null) {\n          this.hascurrent = false;\n        } else {\n          this.hascurrent = true;\n        }\n      } else if (this.type == \"history\") {\n        this.gethistory();\n      }\n    }\n  },\n  mounted() {\n    console.log(\"mounted\");\n    this.gettype();\n    if (this.type == \"charge\") {\n      this.getcurrent();\n      if (this.currentorder == null) {\n        this.hascurrent = false;\n      } else {\n        this.hascurrent = true;\n      }\n    } else if (this.type == \"current\") {\n      this.getcurrent();\n      if (this.getcurrent == null) {\n        this.hascurrent = false;\n      } else {\n        this.hascurrent = true;\n      }\n    } else if (this.type == \"history\") {\n      this.gethistory();\n    }\n  }\n};","map":{"version":3,"names":["name","data","methods","gettype","type","$route","query","console","log","getcurrent","token","localStorage","getItem","send_data","axios","method","url","JSON","stringify","then","response","currentorder","order_array","filter","state","hascurrent","alert","catch","error","gethistory","history","watch","mounted"],"sources":["src/components/client/order.vue"],"sourcesContent":["<template>\r\n    <div v-if=\"type=='charge'\">\r\n        <div v-if=\"hascurrent\">\r\n            当前有订单，不可充电\r\n        </div>\r\n        <div class=\"box\" v-else>\r\n            \r\n        </div>\r\n    </div>\r\n    <div v-else-if=\"type=='current'\">\r\n        <div v-if=\"hascurrent\">\r\n            展示当前订单\r\n        </div>\r\n        <div v-else>\r\n            当前无订单\r\n        </div>\r\n    </div>\r\n    <div v-else-if=\"type=='history'\">\r\n        <h1>查看历史订单</h1>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"order\",\r\n    data(){\r\n        return{\r\n            \"type\":\"\",\r\n            \"hascurrent\":false,\r\n            \"history\":[],\r\n            \"currentorder\":{}\r\n        }\r\n    },\r\n    methods:{\r\n        gettype(){\r\n            this.type = this.$route.query.type\r\n            console.log(this.type)\r\n        },\r\n        getcurrent(){\r\n            var token = localStorage.getItem(\"token\")\r\n            var send_data = {\r\n                \"token\":token\r\n            }\r\n            this.axios({\r\n                method:\"GET\",\r\n                url:`https://mock.apifox.cn/m1/2726825-0-default/client/index/order`,\r\n                data:JSON.stringify(send_data)\r\n            })\r\n            .then((response)=>{\r\n                console.log(response)\r\n                if(true){\r\n                    // console.log(\"请求的返回值\")\r\n                    // console.log(response.data.data.order_array)\r\n                    this.currentorder = response.data.data.order_array.filter(function(data){\r\n                        return data.state != \"FINISHED\"\r\n                    })\r\n                    if(this.currentorder == null){\r\n                        this.hascurrent = false\r\n                    }\r\n                    else{\r\n                        this.hascurrent = true\r\n                    }\r\n                }\r\n                else{\r\n                    alert(\"response.msg\")\r\n                }\r\n            })\r\n            .catch((error)=>{\r\n                alert(\"getcurrent出错了\")\r\n            })\r\n        },\r\n        gethistory(){\r\n            var token = localStorage.getItem(\"token\")\r\n            var send_data = {\r\n                \"token\":token\r\n            }\r\n            this.axios({\r\n                method:\"GET\",\r\n                url:`https://mock.apifox.cn/m1/2726825-0-default/client/index/order`,\r\n                data:JSON.stringify(send_data)\r\n            })\r\n            .then((response)=>{\r\n                console.log(response)\r\n                if(true){\r\n                    // console.log(\"请求的返回值\")\r\n                    // console.log(response.data.data.order_array)\r\n                    this.history = response.data.data.order_array.filter(function(data){\r\n                        return data.state == \"FINISHED\"\r\n                    })\r\n                }\r\n                else{\r\n                    alert(\"response.msg\")\r\n                }\r\n            })\r\n            .catch((error)=>{\r\n                alert(\"gethistory出错了\")\r\n            })\r\n        }\r\n    },\r\n    watch:{\r\n        $route(){\r\n            console.log(\"watch\")\r\n            this.gettype()\r\n            // 查看当前是否有正在执行的订单\r\n            if(this.type == \"charge\"){\r\n                this.getcurrent()\r\n                if(this.currentorder == null){\r\n                    this.hascurrent = false\r\n                }\r\n                else{\r\n                    this.hascurrent = true\r\n                }\r\n            }\r\n            else if(this.type == \"current\"){\r\n                this.getcurrent()\r\n                if(this.getcurrent == null){\r\n                    this.hascurrent = false\r\n                }\r\n                else{\r\n                    this.hascurrent = true\r\n                }\r\n            }\r\n            else if(this.type == \"history\"){\r\n                this.gethistory()\r\n            }\r\n          }\r\n    },\r\n    mounted(){\r\n        console.log(\"mounted\")\r\n        this.gettype()\r\n        if(this.type == \"charge\"){\r\n            this.getcurrent()\r\n            if(this.currentorder == null){\r\n                this.hascurrent = false\r\n            }\r\n            else{\r\n                this.hascurrent = true\r\n            }\r\n        }\r\n        else if(this.type == \"current\"){\r\n            this.getcurrent()\r\n            if(this.getcurrent == null){\r\n                this.hascurrent = false\r\n            }\r\n            else{\r\n                this.hascurrent = true\r\n            }\r\n        }\r\n        else if(this.type == \"history\"){\r\n            this.gethistory()\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .clientloginbox {\r\n        width: 300px;\r\n        padding: 40px;\r\n        /* 绝对定位，通过这个可以使元素放在页面的任何一个位置上 */\r\n        position: absolute;\r\n        /* 以下三行代码实现了块元素在百分比下居中 可以参考： https://www.cnblogs.com/knuzy/p/9993181.html */\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50% , -50%);\r\n        /* 设置登陆界面的背景颜色 */\r\n        background-color: rgb(135, 166, 224);\r\n        /* 规定标签中元素属性为 text 的居中 */\r\n        text-align: center;\r\n    }\r\n</style>"],"mappings":"AAwBA;EACAA,IAAA;EACAC,KAAA;IACA;MACA;MACA;MACA;MACA;IACA;EACA;EACAC,OAAA;IACAC,QAAA;MACA,KAAAC,IAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAF,IAAA;MACAG,OAAA,CAAAC,GAAA,MAAAJ,IAAA;IACA;IACAK,WAAA;MACA,IAAAC,KAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,IAAAC,SAAA;QACA,SAAAH;MACA;MACA,KAAAI,KAAA;QACAC,MAAA;QACAC,GAAA;QACAf,IAAA,EAAAgB,IAAA,CAAAC,SAAA,CAAAL,SAAA;MACA,GACAM,IAAA,CAAAC,QAAA;QACAb,OAAA,CAAAC,GAAA,CAAAY,QAAA;QACA;UACA;UACA;UACA,KAAAC,YAAA,GAAAD,QAAA,CAAAnB,IAAA,CAAAA,IAAA,CAAAqB,WAAA,CAAAC,MAAA,WAAAtB,IAAA;YACA,OAAAA,IAAA,CAAAuB,KAAA;UACA;UACA,SAAAH,YAAA;YACA,KAAAI,UAAA;UACA,OACA;YACA,KAAAA,UAAA;UACA;QACA,OACA;UACAC,KAAA;QACA;MACA,GACAC,KAAA,CAAAC,KAAA;QACAF,KAAA;MACA;IACA;IACAG,WAAA;MACA,IAAAnB,KAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,IAAAC,SAAA;QACA,SAAAH;MACA;MACA,KAAAI,KAAA;QACAC,MAAA;QACAC,GAAA;QACAf,IAAA,EAAAgB,IAAA,CAAAC,SAAA,CAAAL,SAAA;MACA,GACAM,IAAA,CAAAC,QAAA;QACAb,OAAA,CAAAC,GAAA,CAAAY,QAAA;QACA;UACA;UACA;UACA,KAAAU,OAAA,GAAAV,QAAA,CAAAnB,IAAA,CAAAA,IAAA,CAAAqB,WAAA,CAAAC,MAAA,WAAAtB,IAAA;YACA,OAAAA,IAAA,CAAAuB,KAAA;UACA;QACA,OACA;UACAE,KAAA;QACA;MACA,GACAC,KAAA,CAAAC,KAAA;QACAF,KAAA;MACA;IACA;EACA;EACAK,KAAA;IACA1B,OAAA;MACAE,OAAA,CAAAC,GAAA;MACA,KAAAL,OAAA;MACA;MACA,SAAAC,IAAA;QACA,KAAAK,UAAA;QACA,SAAAY,YAAA;UACA,KAAAI,UAAA;QACA,OACA;UACA,KAAAA,UAAA;QACA;MACA,OACA,SAAArB,IAAA;QACA,KAAAK,UAAA;QACA,SAAAA,UAAA;UACA,KAAAgB,UAAA;QACA,OACA;UACA,KAAAA,UAAA;QACA;MACA,OACA,SAAArB,IAAA;QACA,KAAAyB,UAAA;MACA;IACA;EACA;EACAG,QAAA;IACAzB,OAAA,CAAAC,GAAA;IACA,KAAAL,OAAA;IACA,SAAAC,IAAA;MACA,KAAAK,UAAA;MACA,SAAAY,YAAA;QACA,KAAAI,UAAA;MACA,OACA;QACA,KAAAA,UAAA;MACA;IACA,OACA,SAAArB,IAAA;MACA,KAAAK,UAAA;MACA,SAAAA,UAAA;QACA,KAAAgB,UAAA;MACA,OACA;QACA,KAAAA,UAAA;MACA;IACA,OACA,SAAArB,IAAA;MACA,KAAAyB,UAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}