{"ast":null,"code":"export default {\n  name: 'charge',\n  data() {\n    return {\n      \"charge_id\": \"\",\n      \"carinfo\": [],\n      \"info\": \"\"\n    };\n  },\n  methods: {\n    getParams() {\n      this.charge_id = this.$route.query.stationid;\n      console.log(this.charge_id);\n    },\n    goback() {\n      this.$router.replace(\"/admin/manage\");\n    }\n  },\n  watch: {\n    $route() {\n      this.getParams();\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    next();\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      console.log(\"route enter\");\n      vm.charge_id = vm.$route.query.stationid;\n      // debugger;\n      // \n      var token = localStorage.getItem(\"token\");\n      var send_data = {\n        \"token\": token,\n        \"charge_id\": vm.charge_id\n      };\n      vm.axios({\n        method: 'GET',\n        url: `https://mock.apifox.cn/m1/2726825-0-default/admin/index/charge`,\n        // headers:{\n        //   'Content-type': 'application/json; charset=UTF-8'\n        // },\n        data: JSON.stringify(send_data)\n      }).then(response => {\n        console.log(response);\n        if (response.data.code != 0) {\n          //   this.$router.push('/admin/manage')\n          //   localStorage.setItem('token',response.data.data.token)\n          vm.carinfo = response.data.data.charge_info.car_blocks;\n        } else {\n          vm.info = response.data.msg;\n        }\n      }).catch(error => {\n        alert('charge出错了');\n      });\n    });\n  }\n};","map":{"version":3,"names":["name","data","methods","getParams","charge_id","$route","query","stationid","console","log","goback","$router","replace","watch","beforeRouteLeave","to","from","next","beforeRouteEnter","vm","token","localStorage","getItem","send_data","axios","method","url","JSON","stringify","then","response","code","carinfo","charge_info","car_blocks","info","msg","catch","error","alert"],"sources":["src/components/admin/charge.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <button @click=\"goback\">返回登录界面</button>\r\n      <h1>{{charge_id}}号充电桩等候区车辆信息</h1>\r\n      <el-table :data=\"carinfo\" style=\"width:100%\" :cell-style=\"{ textAlign: 'center' }\" empty-text=\"--\">\r\n      <el-table-column prop=\"user_id\" label=\"用户\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"名字\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"power_capicity\" label=\"电池总容量\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"power_current\" label=\"当前电量\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"state\" label=\"当前状态\" width=\"180\"></el-table-column>\r\n    </el-table>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n      name:'charge',\r\n      data(){\r\n          return {\r\n              \"charge_id\":\"\",\r\n              \"carinfo\":[],\r\n              \"info\":\"\"\r\n          }\r\n      },\r\n      methods:{\r\n          getParams(){\r\n              this.charge_id = this.$route.query.stationid\r\n              console.log(this.charge_id)\r\n          },\r\n          goback(){\r\n            this.$router.replace(\"/admin/manage\")\r\n          }\r\n      },\r\n      watch:{\r\n          $route(){\r\n              this.getParams()\r\n          }\r\n      },\r\n      beforeRouteLeave(to,from,next){\r\n        next()\r\n      },\r\n      beforeRouteEnter(to,from,next){\r\n        next(vm => {\r\n          console.log(\"route enter\")\r\n          vm.charge_id = vm.$route.query.stationid\r\n          // debugger;\r\n          // \r\n          var token = localStorage.getItem(\"token\")\r\n          var send_data = {\r\n            \"token\": token,\r\n            \"charge_id\":vm.charge_id\r\n          }\r\n          vm.axios({\r\n              method:'GET',\r\n              url:`https://mock.apifox.cn/m1/2726825-0-default/admin/index/charge`,\r\n              // headers:{\r\n              //   'Content-type': 'application/json; charset=UTF-8'\r\n              // },\r\n              data:JSON.stringify(send_data)\r\n            })\r\n            .then((response)=>{\r\n              console.log(response)\r\n              if(response.data.code != 0){\r\n              //   this.$router.push('/admin/manage')\r\n              //   localStorage.setItem('token',response.data.data.token)\r\n                vm.carinfo = response.data.data.charge_info.car_blocks\r\n              }\r\n              else{\r\n                vm.info = response.data.msg\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              alert('charge出错了')\r\n            })\r\n        })\r\n      }\r\n  }\r\n  </script>\r\n  \r\n  <style>\r\n  \r\n  </style>"],"mappings":"AAeA;EACAA,IAAA;EACAC,KAAA;IACA;MACA;MACA;MACA;IACA;EACA;EACAC,OAAA;IACAC,UAAA;MACA,KAAAC,SAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,SAAA;MACAC,OAAA,CAAAC,GAAA,MAAAL,SAAA;IACA;IACAM,OAAA;MACA,KAAAC,OAAA,CAAAC,OAAA;IACA;EACA;EACAC,KAAA;IACAR,OAAA;MACA,KAAAF,SAAA;IACA;EACA;EACAW,iBAAAC,EAAA,EAAAC,IAAA,EAAAC,IAAA;IACAA,IAAA;EACA;EACAC,iBAAAH,EAAA,EAAAC,IAAA,EAAAC,IAAA;IACAA,IAAA,CAAAE,EAAA;MACAX,OAAA,CAAAC,GAAA;MACAU,EAAA,CAAAf,SAAA,GAAAe,EAAA,CAAAd,MAAA,CAAAC,KAAA,CAAAC,SAAA;MACA;MACA;MACA,IAAAa,KAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,IAAAC,SAAA;QACA,SAAAH,KAAA;QACA,aAAAD,EAAA,CAAAf;MACA;MACAe,EAAA,CAAAK,KAAA;QACAC,MAAA;QACAC,GAAA;QACA;QACA;QACA;QACAzB,IAAA,EAAA0B,IAAA,CAAAC,SAAA,CAAAL,SAAA;MACA,GACAM,IAAA,CAAAC,QAAA;QACAtB,OAAA,CAAAC,GAAA,CAAAqB,QAAA;QACA,IAAAA,QAAA,CAAA7B,IAAA,CAAA8B,IAAA;UACA;UACA;UACAZ,EAAA,CAAAa,OAAA,GAAAF,QAAA,CAAA7B,IAAA,CAAAA,IAAA,CAAAgC,WAAA,CAAAC,UAAA;QACA,OACA;UACAf,EAAA,CAAAgB,IAAA,GAAAL,QAAA,CAAA7B,IAAA,CAAAmC,GAAA;QACA;MACA,GACAC,KAAA,CAAAC,KAAA;QACAC,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}